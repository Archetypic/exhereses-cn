Source: written by oahong
Upstream: No.
Reason: fix configure options to avoid automagic dependencies, fix icon path
diff -U 3 -H -b -w -B -E -d -i -r -N -- gcin-1.4.5.pre4.orig/configure gcin-1.4.5.pre4/configure
--- gcin-1.4.5.pre4.orig/configure	2009-03-29 21:30:07.000000000 +0800
+++ gcin-1.4.5.pre4/configure	2009-04-18 15:09:39.000000000 +0800
@@ -41,6 +41,9 @@
 use_i18n='N'
 use_tsin='Y'
 use_gcb='Y'
+use_anthy='N'
+qt4_im='N'
+qt3_im='N'
 
 if [ "$GCIN_USE_XIM" ]; then
   use_xim=$GCIN_USE_XIM
@@ -62,6 +65,11 @@
   ;;
   --use_gcb=*) use_gcb=`echo $opt | cut -d '=' -f 2`
   ;;
+  --use_anthy*) use_anthy=`echo $opt | cut -d '=' -f 2`
+  ;;
+  --qt3_im*) qt3_im=`echo $opt | cut -d '=' -f 2`
+  ;;
+  --qt4_im*) qt4_im=`echo $opt | cut -d '=' -f 2`
   esac
 done
 
@@ -118,9 +126,14 @@
   USE_ANTHY=N
   echo "It's ok if you don't want anthy support."
 else
+  if [[ $use_anthy == "N" ]] ; then
+      USE_ANTHY=N
+      echo "disabled."
+  else
   USE_ANTHY=Y
   echo "found."
 fi
+fi
 
 LIB='lib'
 if [ -d /lib64 ]; then
@@ -128,9 +141,9 @@
 fi
 
 QT_IM='N'
-QT_IM_DIR=/usr/lib/qt3/plugins/lib/inputmethods
+QT_IM_DIR=/usr/$LIB/qt3/plugins/inputmethods
 echo "testing if you have qt3 support"
-if [ -d  $QT_IM_DIR ]; then
+if [ -d  $QT_IM_DIR ] && [[ $qt3_im = "Y" ]]; then
   QT_IM='Y'
 fi
 
@@ -142,14 +155,19 @@
 
 
 QT4_IM='N'
-QT4_IM_DIR=/usr/lib/qt4/plugins/lib/inputmethods
+QT4_IM_DIR=/usr/$LIB/qt4/plugins/inputmethods
 echo "testing if you have qt4 support"
 if [ -d  $QT4_IM_DIR ]; then
   QT4_IM='Y'
 fi
 
 if [ $QT4_IM = "Y" ]; then
+    if [[ $qt4_im = "N" ]] ; then
+        QT4_IM='N'
+        echo "-> Yes, but disabled"
+    else
     echo "-> Yes, you have qt4 support"
+    fi
 else
     echo "-> No, you don't have. It's ok if you don't want QT support."
 fi
@@ -187,10 +205,10 @@
 fi
 
 
-OPTFLAGS="-g"
-if [ $prefix = /usr ]; then
-  OPTFLAGS="-O"
-fi
+OPTFLAGS=""
+#if [ $prefix = /usr ]; then
+#  OPTFLAGS="-O"
+#fi
 
 
 echo "CC=gcc" > config.mak
@@ -217,9 +235,9 @@
 echo "OPTFLAGS=$OPTFLAGS" >> config.mak
 echo "DOC_DIR=\$(datadir_r)/doc/gcin-$GCIN_VERSION" >> config.mak
 echo "DOC_DIR_i=\$(datadir)/doc/gcin-$GCIN_VERSION" >> config.mak
-echo "GCIN_ICON_DIR=\$(datadir_r)/icons/gcin" >> config.mak
-echo "SYS_ICON_DIR=\$(datadir_r)/icons" >> config.mak
-echo "GCIN_ICON_DIR_i=\$(datadir)/icons/gcin" >> config.mak
+echo "GCIN_ICON_DIR=\$(datadir_r)/pixmaps/gcin" >> config.mak
+echo "SYS_ICON_DIR=\$(datadir_r)/pixmaps" >> config.mak
+echo "GCIN_ICON_DIR_i=\$(datadir)/pixmaps/gcin" >> config.mak
 echo "GCIN_BIN_DIR=\$(bindir_r)" >> config.mak
 echo "FREEBSD=$FREEBSD" >> config.mak
 echo "QT_IM=$QT_IM" >> config.mak
