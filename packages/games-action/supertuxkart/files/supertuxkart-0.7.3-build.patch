Source: oahong@oahong.me
Upstream: no, this is not a proper fix
Reason: Fix build system
--- a/configure.ac	2012-05-12 14:25:44.133057876 +0200
+++ b/configure.ac	2012-05-12 14:25:44.135057864 +0200
@@ -402,7 +402,6 @@
   enet_LIBS="-Lenet -lenet"
   ;;
 esac
-ENETTREE="src/enet"
 
 # ==========================================
 # Check for a known compiler bug, details in 
@@ -424,6 +423,7 @@
 AC_SUBST(fribidi_LIBS)
 AC_SUBST(bullet_LIBS)
 AC_SUBST(enet_LIBS)
+AC_SUBST(enet_CFLAGS)
 AC_SUBST(opengl_LIBS)
 AC_SUBST(openal_LIBS)
 AC_SUBST(oggvorbis_LIBS)
@@ -455,7 +455,6 @@
  src/ide/Makefile                   \
  src/bullet/Makefile                \
  src/bullet/src/Makefile            \
- src/enet/Makefile                  \
  tools/Makefile                 
 ])
 AC_OUTPUT
--- a/data/challenges/Makefile.am	2012-05-12 14:27:23.645468524 +0200
+++ b/data/challenges/Makefile.am	2012-05-12 14:27:23.656468460 +0200
@@ -1,5 +1,5 @@
 # challenges/
 
-pkgdatadir = $(datadir)/games/$(PACKAGE)/data/challenges
+pkgdatadir = $(datadir)/$(PACKAGE)/data/challenges
 
 nobase_dist_pkgdata_DATA =  $(shell find $(srcdir) -name "*.challenge") 
--- a/data/fonts/Makefile.am	2012-05-12 14:32:42.770423664 +0200
+++ b/data/fonts/Makefile.am	2012-05-12 14:32:42.775423710 +0200
@@ -1,6 +1,6 @@
 # data/fonts/
 
-pkgdatadir = $(datadir)/games/$(PACKAGE)/data/fonts
+pkgdatadir = $(datadir)/$(PACKAGE)/data/fonts
 
 dist_pkgdata_DATA =  $(shell find $(srcdir) -name "*.png") \
                      $(shell find $(srcdir) -name "*.xml")
--- a/data/gfx/Makefile.am	2012-05-12 14:33:22.286781438 +0200
+++ b/data/gfx/Makefile.am	2012-05-12 14:33:22.295781519 +0200
@@ -1,5 +1,5 @@
 #data/gfx
 
-pkgdatadir   = $(datadir)/games/$(PACKAGE)/data/gfx
+pkgdatadir   = $(datadir)/$(PACKAGE)/data/gfx
 dist_pkgdata_DATA = $(shell find $(srcdir) -name "*.xml")
 
--- a/data/grandprix/Makefile.am	2012-05-12 14:33:47.272005687 +0200
+++ b/data/grandprix/Makefile.am	2012-05-12 14:33:47.278005741 +0200
@@ -1,6 +1,6 @@
 # data/music
 
-pkgdatadir = $(datadir)/games/$(PACKAGE)/data/grandprix
+pkgdatadir = $(datadir)/$(PACKAGE)/data/grandprix
 
 dist_pkgdata_DATA = $(shell find $(srcdir) -name "*.grandprix")  \
                     $(shell find $(srcdir) -name "*.challenge")  \
--- a/data/gui/Makefile.am	2012-05-12 14:34:50.348565116 +0200
+++ b/data/gui/Makefile.am	2012-05-12 14:34:50.362565239 +0200
@@ -1,6 +1,6 @@
 # data/gui/
 
-pkgdatadir = $(datadir)/games/$(PACKAGE)/data/gui
+pkgdatadir = $(datadir)/$(PACKAGE)/data/gui
 
 nobase_dist_pkgdata_DATA =  $(shell find $(srcdir) -name "*.png"      ) \
                             $(shell find $(srcdir) -name "*.jpg"      ) \
--- a/data/karts/Makefile.am	2012-05-12 14:41:18.763806546 +0200
+++ b/data/karts/Makefile.am	2012-05-12 14:41:18.776806648 +0200
@@ -1,6 +1,6 @@
 # data/karts
 
-pkgdatadir= $(datadir)/games/$(PACKAGE)/data/karts
+pkgdatadir= $(datadir)/$(PACKAGE)/data/karts
 
 nobase_dist_pkgdata_DATA = $(shell find $(srcdir) -name "materials.xml") \
                            $(shell find $(srcdir) -name "*.png")         \
--- a/data/models/Makefile.am	2012-05-12 14:42:06.492181665 +0200
+++ b/data/models/Makefile.am	2012-05-12 14:42:06.503181750 +0200
@@ -1,6 +1,6 @@
 # data/models/
 
-pkgdatadir = $(datadir)/games/$(PACKAGE)/data/models
+pkgdatadir = $(datadir)/$(PACKAGE)/data/models
 
 dist_pkgdata_DATA =  $(shell find $(srcdir) -name "*.b3d") \
                      $(shell find $(srcdir) -name "*.png") \
--- a/data/music/Makefile.am	2012-05-12 14:42:37.977426446 +0200
+++ b/data/music/Makefile.am	2012-05-12 14:42:37.990426548 +0200
@@ -1,6 +1,6 @@
 # data/music
 
-pkgdatadir = $(datadir)/games/$(PACKAGE)/data/music
+pkgdatadir = $(datadir)/$(PACKAGE)/data/music
 
 dist_pkgdata_DATA = $(shell find $(srcdir) -name "*.ogg")  \
                     $(shell find $(srcdir) -name "*.music") \
--- a/data/po/Makefile.am	2012-05-12 14:43:06.482646243 +0200
+++ b/data/po/Makefile.am	2012-05-12 14:43:06.489646298 +0200
@@ -1,6 +1,6 @@
 # data/po/
 
-pkgdatadir = $(datadir)/games/@PACKAGE@/data/po
+pkgdatadir = $(datadir)/@PACKAGE@/data/po
 
 dist_pkgdata_DATA = $(shell find $(srcdir) -name "*.po") \
                     supertuxkart.pot
--- a/data/sfx/Makefile.am	2012-05-12 14:43:32.038841843 +0200
+++ b/data/sfx/Makefile.am	2012-05-12 14:43:32.047841912 +0200
@@ -1,6 +1,6 @@
 # sfx/
 
-pkgdatadir = $(datadir)/games/$(PACKAGE)/data/sfx
+pkgdatadir = $(datadir)/$(PACKAGE)/data/sfx
 
 nobase_dist_pkgdata_DATA =  $(shell find $(srcdir) -name "*.ogg")      \
                             $(shell find $(srcdir) -name "sfx.xml")    \
--- a/data/shaders/Makefile.am	2012-05-12 14:43:57.559035802 +0200
+++ b/data/shaders/Makefile.am	2012-05-12 14:43:57.571035892 +0200
@@ -1,6 +1,6 @@
 # data/shaders/
 
-pkgdatadir = $(datadir)/games/@PACKAGE@/data/shaders
+pkgdatadir = $(datadir)/@PACKAGE@/data/shaders
 
 dist_pkgdata_DATA = $(shell find $(srcdir) -name "*.frag") \
                     $(shell find $(srcdir) -name "*.vert") 
--- a/data/textures/Makefile.am	2012-05-12 14:44:28.660270342 +0200
+++ b/data/textures/Makefile.am	2012-05-12 14:44:28.669270409 +0200
@@ -1,6 +1,6 @@
 # data/textures
 
-pkgdatadir   = $(datadir)/games/$(PACKAGE)/data/textures
+pkgdatadir   = $(datadir)/$(PACKAGE)/data/textures
 dist_pkgdata_DATA = $(shell find $(srcdir) -name "*.png") \
                     $(shell find $(srcdir) -name "*.jpg") \
                     materials.xml License.txt
--- a/data/tracks/Makefile.am	2012-05-12 14:45:00.831510846 +0200
+++ b/data/tracks/Makefile.am	2012-05-12 14:45:00.846510958 +0200
@@ -1,6 +1,6 @@
 # data/tracks
 
-pkgdatadir= $(datadir)/games/$(PACKAGE)/data/tracks
+pkgdatadir= $(datadir)/$(PACKAGE)/data/tracks
 nobase_dist_pkgdata_DATA = $(shell find $(srcdir) -name "*.jpg")           \
                            $(shell find $(srcdir) -name "*.JPG")           \
                            $(shell find $(srcdir) -name "*.png")           \
--- a/data/tutorials/Makefile.am	2012-05-12 14:45:29.216721284 +0200
+++ b/data/tutorials/Makefile.am	2012-05-12 14:45:29.225721350 +0200
@@ -1,6 +1,6 @@
 # data/po/
 
-pkgdatadir = $(datadir)/games/@PACKAGE@/data/tutorials
+pkgdatadir = $(datadir)/@PACKAGE@/data/tutorials
 
 dist_pkgdata_DATA = $(shell find $(srcdir) -name "*.tutorial") 
 
--- a/data/Makefile.am	2012-05-12 14:45:43.532826794 +0200
+++ b/data/Makefile.am	2012-05-12 14:45:43.539826845 +0200
@@ -3,7 +3,7 @@
 SUBDIRS    = challenges fonts gfx gui karts models music po sfx textures tracks \
              grandprix tutorials shaders
 
-pkgdatadir = $(datadir)/games/$(PACKAGE)/data
+pkgdatadir = $(datadir)/$(PACKAGE)/data
 
 dist_pkgdata_DATA = \
  $(shell find $(srcdir) -maxdepth 1 -name "*.challenge") \
--- a/Makefile.am	2012-05-12 14:46:43.647265316 +0200
+++ b/Makefile.am	2012-05-12 14:46:43.665265446 +0200
@@ -1,6 +1,6 @@
 ACLOCAL_AMFLAGS = -I m4
 
-SUBDIRS = $(BULLETTREE) $(ENETTREE) src doc data tools
+SUBDIRS = $(BULLETTREE) src doc data tools
 
 pkgdatadir=$(datadir)/doc/$(PACKAGE)
 dist_pkgdata_DATA=AUTHORS ChangeLog COPYING README
--- a/src/Makefile.am	2012-05-12 14:47:52.627759607 +0200
+++ b/src/Makefile.am	2012-05-12 14:47:52.647759749 +0200
@@ -2,11 +2,10 @@
 
 SUBDIRS = ide
 
-bindir=$(prefix)/games
 bin_PROGRAMS = supertuxkart
 
-AM_CPPFLAGS = -DSUPERTUXKART_DATADIR="\"$(datadir)/games/$(PACKAGE)/\""  \
- -I$(srcdir)/bullet/src/ -I$(srcdir)/enet/include/
+AM_CPPFLAGS = -DSUPERTUXKART_DATADIR="\"$(datadir)/$(PACKAGE)/\""  \
+ -I$(srcdir)/bullet/src/ $(enet_CFLAGS)
 
 supertuxkart_SOURCES = \
  main.cpp \
--- a/src/graphics/material.cpp  2012-05-12 15:50:32.518889683 +0200
+++ b/src/graphics/material.cpp   2012-05-12 15:49:07.919966653 +0200
@@ -512,7 +512,7 @@
         // customizable EMT_ONETEXTURE_BLEND instead
         m->MaterialType = video::EMT_ONETEXTURE_BLEND ;
         m->MaterialTypeParam = 
-            pack_texureBlendFunc(video::EBF_SRC_ALPHA, 
+            pack_textureBlendFunc(video::EBF_SRC_ALPHA, 
                                  video::EBF_ONE_MINUS_SRC_ALPHA,
                                  video::EMFN_MODULATE_1X, 
                                  video::EAS_TEXTURE | video::EAS_VERTEX_COLOR);
@@ -539,7 +539,7 @@
         // account, which messes up fading in/out effects. So we use the 
         // more customizable EMT_ONETEXTURE_BLEND instead
         m->MaterialType = video::EMT_ONETEXTURE_BLEND ;
-        m->MaterialTypeParam = pack_texureBlendFunc(video::EBF_SRC_ALPHA, 
+        m->MaterialTypeParam = pack_textureBlendFunc(video::EBF_SRC_ALPHA, 
                                                     video::EBF_ONE,
                                                     video::EMFN_MODULATE_1X,
                                                     video::EAS_TEXTURE | 
--- a/src/guiengine/widgets/CGUIEditBox.cpp       2012-05-12 15:58:51.667771890 +0200
+++ b/src/guiengine/widgets/CGUIEditBox.cpp      2012-05-12 15:58:51.652772175 +0200
@@ -115,7 +115,7 @@
 }
 
 
-video::SColor const& CGUIEditBox::getOverrideColor() const
+video::SColor CGUIEditBox::getOverrideColor() const
 {
        return OverrideColor;
 }
--- a/src/guiengine/widgets/CGUIEditBox.h	2012-05-12 15:58:39.247007330 +0200
+++ b/src/guiengine/widgets/CGUIEditBox.h	2012-05-12 15:58:39.261007064 +0200
@@ -36,7 +36,7 @@
 		virtual void setOverrideColor(video::SColor color);
 
 		//! Gets the override color
-		virtual video::SColor const & getOverrideColor() const;
+		virtual video::SColor getOverrideColor() const;
 
 		//! Sets if the text should use the overide color or the
 		//! color in the gui skin.
