From a1b10d12512632069f592834ff6c9d23a545495b Mon Sep 17 00:00:00 2001
From: Paul Wise <pabs3@bonedaddy.net>
Date: Mon, 14 Feb 2011 12:43:54 +0800
Subject: [PATCH] Do not leak a file descriptor when loading a music list

---
 src/AudioOpenAL.cpp |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/src/AudioOpenAL.cpp b/src/AudioOpenAL.cpp
index 50601e7..3c0c4f1 100644
--- a/src/AudioOpenAL.cpp
+++ b/src/AudioOpenAL.cpp
@@ -769,6 +769,8 @@ void AudioOpenAL::loadMusicList()
 			if(musicMax+1 >= MAX_MUSIC) // limited music array size.
 				break;
 		}
+		fclose(file);
+		file = NULL;
 	}
 	else
 		config->setUsePlayList(false);
-- 
1.7.0.1

